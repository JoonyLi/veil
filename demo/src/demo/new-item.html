<form id="new-item-widget" method="POST" action="/resources/items"
      data-error-message="_('Failed to create item')">
    <label class="{{ error_css(errors, 'name') }}">{{ _('Name: ') }}
        <input name="name" type="text" maxlength="64" value="{{ name }}"/>
        {{ error_html(errors, 'name') }}
    </label>
    <button type="submit">{{ _('Create') }}</button>
</form>
{% block inline_javascript %}
<script type="text/javascript">
    veil.event.EVENT_ITEM_CREATED = 'item-created';

    $(document).ready(function () {
        $('#new-item-widget button[type=submit]').live('click', function (e) {
            e.preventDefault();
            veil.resource.createFromWidget($('#new-item-widget'), function () {
                veil.event.trigger(veil.event.EVENT_ITEM_CREATED);
            });
        });
    });
</script>
{% endblock %}
